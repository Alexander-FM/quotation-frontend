<div class="card">
  <p-toast></p-toast>

  <p-toolbar styleClass="mb-4">
    <ng-template pTemplate="left">
      <h2 class="m-0">Clientes</h2>
    </ng-template>
    <ng-template pTemplate="right">
      <button pButton label="Nuevo" icon="pi pi-plus" class="p-button-success" (click)="openNew()"></button>
    </ng-template>
  </p-toolbar>

  <p-table
    [value]="customers"
    [rows]="10"
    [paginator]="true"
    [loading]="loading"
    responsiveLayout="scroll">
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="name">Nombre <p-sortIcon field="name"></p-sortIcon></th>
        <th pSortableColumn="doc">Documento <p-sortIcon field="doc"></p-sortIcon></th>
        <th>Acciones</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-customer>
      <tr>
        <td>{{customer.name}}</td>
        <td>{{customer.doc}}</td>
        <td>
          <button pButton icon="pi pi-pencil" class="p-button-rounded p-button-text p-button-warning mr-2" (click)="editCustomer(customer)"></button>
          <button pButton icon="pi pi-trash" class="p-button-rounded p-button-text p-button-danger" (click)="deleteCustomer(customer)"></button>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="3" class="text-center">No hay clientes disponibles.</td>
      </tr>
    </ng-template>
  </p-table>

  <p-dialog [(visible)]="customerDialog" [style]="{width: '450px'}" header="Cliente" [modal]="true" styleClass="p-fluid">
    <ng-template pTemplate="content">
      <div class="field">
        <label for="name">Nombre</label>
        <input type="text" pInputText id="name" [(ngModel)]="customer.name" required autofocus />
      </div>
      <div class="field">
        <label for="doc">Documento</label>
        <input type="text" pInputText id="doc" [(ngModel)]="customer.doc" required />
      </div>
    </ng-template>
    <ng-template pTemplate="footer">
      <button pButton label="Cancelar" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
      <button pButton label="Guardar" icon="pi pi-check" class="p-button-text" (click)="saveCustomer()"></button>
    </ng-template>
  </p-dialog>
</div>

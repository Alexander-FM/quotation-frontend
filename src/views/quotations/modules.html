<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h4">Módulos</h1>
</div>
<table class="table table-sm table-striped" id="tblModules">
  <thead>
    <tr><th>Nombre</th><th>Materiales</th></tr>
  </thead>
  <tbody></tbody>
</table>
<script>
$(function(){
  const id = (AppState.selection && AppState.selection.quotationId) || null;
  if(!id){ $("#tblModules tbody").html("<tr><td colspan='2'>Selecciona una cotización</td></tr>"); return; }
  QuotationService.modules(id).then(data=>{
    const rows = (data||[]).map(x=>`<tr><td>${x.name||""}</td><td>${(x.materials||[]).length}</td></tr>`).join("");
    $("#tblModules tbody").html(rows);
  }).catch(()=>{ Utils.notify("Error cargando módulos","danger"); });
});
</script>
